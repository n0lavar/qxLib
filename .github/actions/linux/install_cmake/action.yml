name: Install cmake 3.17

runs:
  using: composite
  steps:
    - name: Install cmake 3.17
      shell: bash
      run: |
        cmake --version
              
        if [ "$RUNNER_OS" = "Linux" ]; then
          cmake_package_name=cmake-3.17.0-Linux-x86_64;
        elif [ "$RUNNER_OS" = "macOS" ]; then
          cmake_package_name=cmake-3.17.0-Darwin-x86_64;
        fi  

        wget https://github.com/Kitware/CMake/releases/download/v3.17.0/$cmake_package_name.tar.gz
        tar xf $cmake_package_name.tar.gz
        
        if [ "$RUNNER_OS" = "Linux" ]; then
          export PATH="`pwd`/$cmake_package_name/bin:$PATH";
        elif [ "$RUNNER_OS" = "macOS" ]; then
          export PATH="`pwd`/$cmake_package_name/CMake.app/Contents/bin:$PATH";
        fi  

        cmake --version